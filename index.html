<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registrasi Calon Santri - PPHB Burhan Al-Bana Metro</title>
    
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Poppins for headings, Inter for body -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Poppins:wght@600;700&display=swap" rel="stylesheet">
    
    <style>
        /* Custom styles for a more professional UX */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
        }
        h1, h2, h3, h4, h5, h6, legend {
            font-family: 'Poppins', sans-serif;
        }
        .form-input, .form-textarea, .form-select {
            transition: all 0.2s ease-in-out;
            background-color: #f8fafc;
            border-color: #e2e8f0;
        }
        .form-input:focus, .form-textarea:focus, .form-select:focus {
            border-color: #10b981;
            box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.2);
            background-color: #ffffff;
        }
        .spinner {
            border-top-color: transparent;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        .modal-backdrop {
            transition: opacity 0.3s ease;
        }
    </style>
</head>
<body class="antialiased text-gray-700">

    <!-- Main Container -->
    <div class="container mx-auto px-4 py-12 md:py-20">
        
        <div class="max-w-3xl mx-auto bg-white rounded-2xl shadow-2xl shadow-emerald-200/50 overflow-hidden">
            <!-- Header Section -->
            <div class="bg-gradient-to-br from-emerald-600 to-green-700 p-8 text-white text-center">
                <h1 class="text-3xl md:text-4xl font-bold tracking-tight">Formulir Pendaftaran Santri</h1>
                <p class="mt-2 text-emerald-100 text-lg opacity-90">Pondok Pesantren Hadits Besar Burhan Al-Bana Metro</p>
            </div>

            <!-- Form Section -->
            <form id="registrationForm" class="p-6 md:p-10 space-y-8" novalidate>

                <!-- Important Information Section (Tidak ada perubahan) -->
                <div class="bg-emerald-50 border-l-4 border-emerald-500 p-5 rounded-r-lg">
                    <div class="flex">
                        <div class="flex-shrink-0">
                            <svg class="h-6 w-6 text-emerald-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                        </div>
                        <div class="ml-4">
                            <h4 class="font-bold text-lg text-emerald-800">Perhatian Calon Santri</h4>
                            <div class="mt-2 text-gray-600">
                                <ul class="list-decimal list-inside space-y-1">
                                    <li>Sanggup Mentaati Semua Peraturan Baik Tertulis Maupun Tidak Tertulis</li>
                                    <li>Berbudi Luhur dan Siap Menjaga Nama Baik Pondok</li>
                                    <li>Mengikuti Semua Kegiatan Pondok</li>
                                    <li>Bertempat Tinggal di dalam Pondok</li>
                                    <li>Sanggup Menjaga Kerukunan dan Kekompakan</li>
                                </ul>
                                <p class="mt-4"><strong>Contact Person:</strong> <a href="https://wa.link/nyz5ln" target="_blank" class="text-emerald-600 hover:underline font-semibold">Ust. Saiful Bahruni (WhatsApp)</a></p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Section: Pilihan Pendaftaran (Tidak ada perubahan) -->
                <fieldset class="space-y-4">
                    <div class="bg-white p-5 rounded-xl border border-gray-200 shadow-sm">
                        <label class="block text-base font-medium text-gray-800 mb-3">Asrama Yang Akan Diikuti <span class="text-red-500">*</span></label>
                        <div class="grid grid-cols-2 md:grid-cols-3 gap-x-6 gap-y-3">
                            <label class="flex items-center"><input type="radio" name="Asrama Yang Akan Diikuti" value="Bukhori" class="form-radio h-5 w-5 text-emerald-600 focus:ring-emerald-500" required><span class="ml-3 text-gray-700">Bukhori</span></label>
                            <label class="flex items-center"><input type="radio" name="Asrama Yang Akan Diikuti" value="Muslim" class="form-radio h-5 w-5 text-emerald-600 focus:ring-emerald-500" required><span class="ml-3 text-gray-700">Muslim</span></label>
                            <label class="flex items-center"><input type="radio" name="Asrama Yang Akan Diikuti" value="Abu Daud" class="form-radio h-5 w-5 text-emerald-600 focus:ring-emerald-500" required><span class="ml-3 text-gray-700">Abu Daud</span></label>
                            <label class="flex items-center"><input type="radio" name="Asrama Yang Akan Diikuti" value="Tirmidzi" class="form-radio h-5 w-5 text-emerald-600 focus:ring-emerald-500" required><span class="ml-3 text-gray-700">Tirmidzi</span></label>
                            <label class="flex items-center"><input type="radio" name="Asrama Yang Akan Diikuti" value="Nasa'i" class="form-radio h-5 w-5 text-emerald-600 focus:ring-emerald-500" required><span class="ml-3 text-gray-700">Nasa'i</span></label>
                            <label class="flex items-center"><input type="radio" name="Asrama Yang Akan Diikuti" value="Ibnu Majah" class="form-radio h-5 w-5 text-emerald-600 focus:ring-emerald-500" required><span class="ml-3 text-gray-700">Ibnu Majah</span></label>
                        </div>
                    </div>
                    <div class="bg-white p-5 rounded-xl border border-gray-200 shadow-sm">
                        <label class="block text-base font-medium text-gray-800 mb-3">Tahun <span class="text-red-500">*</span></label>
                        <div class="flex flex-wrap gap-x-6 gap-y-3">
                            <label class="flex items-center"><input type="radio" name="Tahun" value="2025" class="form-radio h-5 w-5 text-emerald-600 focus:ring-emerald-500" required><span class="ml-3 text-gray-700">2025</span></label>
                            <label class="flex items-center"><input type="radio" name="Tahun" value="2026" class="form-radio h-5 w-5 text-emerald-600 focus:ring-emerald-500" required><span class="ml-3 text-gray-700">2026</span></label>
                            <label class="flex items-center"><input type="radio" name="Tahun" value="2027" class="form-radio h-5 w-5 text-emerald-600 focus:ring-emerald-500" required><span class="ml-3 text-gray-700">2027</span></label>
                            <label class="flex items-center"><input type="radio" name="Tahun" value="2028" class="form-radio h-5 w-5 text-emerald-600 focus:ring-emerald-500" required><span class="ml-3 text-gray-700">2028</span></label>
                        </div>
                    </div>
                </fieldset>

                <!-- Section: Data Diri Calon Santri -->
                <fieldset class="space-y-4">
                    <legend class="flex items-center text-xl font-semibold text-gray-800 border-b-2 border-gray-100 pb-3 mb-4 w-full">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3 text-emerald-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg>
                        Data Diri Calon Santri
                    </legend>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-white p-5 rounded-xl border border-gray-200 shadow-sm">
                            <label for="no_nik" class="block text-sm font-medium text-gray-700 mb-1">No NIK <span class="text-red-500">*</span></label>
                            <input type="text" id="no_nik" name="No NIK" class="form-input w-full" required>
                            <p id="lookupStatus" class="text-sm text-gray-500 mt-2 h-4"></p>
                        </div>
                        <div class="bg-white p-5 rounded-xl border border-gray-200 shadow-sm">
                            <label for="nama_lengkap" class="block text-sm font-medium text-gray-700 mb-1">Nama Lengkap <span class="text-red-500">*</span></label>
                            <input type="text" id="nama_lengkap" name="Nama Lengkap" class="form-input w-full" required>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-white p-5 rounded-xl border border-gray-200 shadow-sm"><label for="no_kk" class="block text-sm font-medium text-gray-700 mb-1">No KK <span class="text-red-500">*</span></label><input type="text" id="no_kk" name="No KK" class="form-input w-full" required></div>
                        <div class="bg-white p-5 rounded-xl border border-gray-200 shadow-sm"><label for="nama_panggilan" class="block text-sm font-medium text-gray-700 mb-1">Nama Panggilan <span class="text-red-500">*</span></label><input type="text" id="nama_panggilan" name="Nama Panggilan" class="form-input w-full" required></div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-white p-5 rounded-xl border border-gray-200 shadow-sm">
                            <label class="block text-sm font-medium text-gray-700 mb-3">Jenis Kelamin <span class="text-red-500">*</span></label>
                            <div class="flex items-center space-x-6"><label class="flex items-center"><input type="radio" name="Jenis Kelamin" value="Laki-Laki" class="form-radio h-5 w-5 text-emerald-600 focus:ring-emerald-500" required><span class="ml-3 text-gray-700">Laki-laki</span></label><label class="flex items-center"><input type="radio" name="Jenis Kelamin" value="Perempuan" class="form-radio h-5 w-5 text-emerald-600 focus:ring-emerald-500" required><span class="ml-3 text-gray-700">Perempuan</span></label></div>
                        </div>
                        <div class="bg-white p-5 rounded-xl border border-gray-200 shadow-sm">
                            <label class="block text-sm font-medium text-gray-700 mb-3">Status Menikah <span class="text-red-500">*</span></label>
                            <div class="flex items-center space-x-6"><label class="flex items-center"><input type="radio" name="Status Menikah" value="Menikah" class="form-radio h-5 w-5 text-emerald-600 focus:ring-emerald-500" required><span class="ml-3 text-gray-700">Menikah</span></label><label class="flex items-center"><input type="radio" name="Status Menikah" value="Belum Menikah" class="form-radio h-5 w-5 text-emerald-600 focus:ring-emerald-500" required><span class="ml-3 text-gray-700">Belum Menikah</span></label></div>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-white p-5 rounded-xl border border-gray-200 shadow-sm"><label for="tempat_lahir" class="block text-sm font-medium text-gray-700 mb-1">Tempat Lahir <span class="text-red-500">*</span></label><input type="text" id="tempat_lahir" name="Tempat Lahir" class="form-input w-full" required></div>
                        <div class="bg-white p-5 rounded-xl border border-gray-200 shadow-sm"><label for="tanggal_lahir" class="block text-sm font-medium text-gray-700 mb-1">Tanggal Lahir <span class="text-red-500">*</span></label><input type="date" id="tanggal_lahir" name="Tanggal Lahir" class="form-input w-full" required></div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-white p-5 rounded-xl border border-gray-200 shadow-sm"><label for="anak_ke" class="block text-sm font-medium text-gray-700 mb-1">Anak Ke <span class="text-red-500">*</span></label><input type="number" id="anak_ke" name="Anak Ke" min="1" class="form-input w-full" required></div>
                        <div class="bg-white p-5 rounded-xl border border-gray-200 shadow-sm"><label for="jumlah_saudara" class="block text-sm font-medium text-gray-700 mb-1">Dari Berapa Bersaudara <span class="text-red-500">*</span></label><input type="number" id="jumlah_saudara" name="Dari Berapa Bersaudara" min="0" class="form-input w-full" required></div>
                    </div>
                    <div class="bg-white p-5 rounded-xl border border-gray-200 shadow-sm"><label for="alamat" class="block text-sm font-medium text-gray-700 mb-1">Alamat <span class="text-red-500">*</span></label><textarea id="alamat" name="Alamat" rows="3" class="form-textarea w-full" required></textarea></div>
                </fieldset>

                <!-- Sisa fieldset lainnya -->
                <fieldset class="space-y-4">
                    <legend class="flex items-center text-xl font-semibold text-gray-800 border-b-2 border-gray-100 pb-3 mb-4 w-full">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3 text-emerald-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" /></svg>
                        Kesehatan & Fisik
                    </legend>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-white p-5 rounded-xl border border-gray-200 shadow-sm"><label for="tinggi_badan" class="block text-sm font-medium text-gray-700 mb-1">Tinggi Badan (dalam CM) <span class="text-red-500">*</span></label><input type="number" id="tinggi_badan" name="Tinggi Badan (dalam CM)" class="form-input w-full" required></div>
                        <div class="bg-white p-5 rounded-xl border border-gray-200 shadow-sm"><label for="berat_badan" class="block text-sm font-medium text-gray-700 mb-1">Berat Badan <span class="text-red-500">*</span></label><input type="number" id="berat_badan" name="Berat Badan" class="form-input w-full" required></div>
                    </div>
                     <div class="bg-white p-5 rounded-xl border border-gray-200 shadow-sm">
                        <label class="block text-sm font-medium text-gray-700 mb-3">Golongan Darah <span class="text-red-500">*</span></label>
                        <div class="flex flex-wrap gap-x-6 gap-y-3">
                            <label class="flex items-center"><input type="radio" name="Golongan Darah" value="A" class="form-radio h-5 w-5 text-emerald-600 focus:ring-emerald-500" required><span class="ml-3 text-gray-700">A</span></label>
                            <label class="flex items-center"><input type="radio" name="Golongan Darah" value="B" class="form-radio h-5 w-5 text-emerald-600 focus:ring-emerald-500" required><span class="ml-3 text-gray-700">B</span></label>
                            <label class="flex items-center"><input type="radio" name="Golongan Darah" value="AB" class="form-radio h-5 w-5 text-emerald-600 focus:ring-emerald-500" required><span class="ml-3 text-gray-700">AB</span></label>
                            <label class="flex items-center"><input type="radio" name="Golongan Darah" value="O" class="form-radio h-5 w-5 text-emerald-600 focus:ring-emerald-500" required><span class="ml-3 text-gray-700">O</span></label>
                            <label class="flex items-center"><input type="radio" name="Golongan Darah" value="Tidak Diketahui" class="form-radio h-5 w-5 text-emerald-600 focus:ring-emerald-500" required><span class="ml-3 text-gray-700">Tidak Diketahui</span></label>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-white p-5 rounded-xl border border-gray-200 shadow-sm"><label for="penyakit" class="block text-sm font-medium text-gray-700 mb-1">Penyakit Yang Pernah Diderita <span class="text-red-500">*</span></label><input type="text" id="penyakit" name="Penyakit Yang Pernah Diderita" class="form-input w-full" required></div>
                        <div class="bg-white p-5 rounded-xl border border-gray-200 shadow-sm"><label for="alergi" class="block text-sm font-medium text-gray-700 mb-1">Alergi <span class="text-red-500">*</span></label><input type="text" id="alergi" name="Alergi" class="form-input w-full" required></div>
                    </div>
                </fieldset>

                <fieldset class="space-y-4">
                    <legend class="flex items-center text-xl font-semibold text-gray-800 border-b-2 border-gray-100 pb-3 mb-4 w-full">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3 text-emerald-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21a6 6 0 00-9-5.197M15 21a6 6 0 01-9-5.197" /></svg>
                        Data Orang Tua / Wali
                    </legend>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-white p-5 rounded-xl border border-gray-200 shadow-sm"><label for="nama_ayah" class="block text-sm font-medium text-gray-700 mb-1">Nama Ayah Kandung <span class="text-red-500">*</span></label><input type="text" id="nama_ayah" name="Nama Ayah Kandung" class="form-input w-full" required></div>
                        <div class="bg-white p-5 rounded-xl border border-gray-200 shadow-sm"><label for="nama_ibu" class="block text-sm font-medium text-gray-700 mb-1">Nama Ibu Kandung <span class="text-red-500">*</span></label><input type="text" id="nama_ibu" name="Nama Ibu Kandung" class="form-input w-full" required></div>
                        <div class="bg-white p-5 rounded-xl border border-gray-200 shadow-sm"><label for="nomor_hp" class="block text-sm font-medium text-gray-700 mb-1">Nomor HP <span class="text-red-500">*</span></label><input type="tel" id="nomor_hp" name="Nomor HP" class="form-input w-full" placeholder="08xxxxxxxxxx" required></div>
                        <div class="bg-white p-5 rounded-xl border border-gray-200 shadow-sm"><label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email <span class="text-red-500">*</span></label><input type="email" id="email" name="Email" class="form-input w-full" placeholder="contoh@email.com" required></div>
                    </div>
                </fieldset>

                <fieldset class="space-y-4">
                    <legend class="flex items-center text-xl font-semibold text-gray-800 border-b-2 border-gray-100 pb-3 mb-4 w-full">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3 text-emerald-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
                        Informasi Sambung
                    </legend>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-white p-5 rounded-xl border border-gray-200 shadow-sm"><label for="daerah_sambung" class="block text-sm font-medium text-gray-700 mb-1">Daerah Sambung <span class="text-red-500">*</span></label><input type="text" id="daerah_sambung" name="Daerah Sambung" class="form-input w-full" required></div>
                        <div class="bg-white p-5 rounded-xl border border-gray-200 shadow-sm"><label for="desa_sambung" class="block text-sm font-medium text-gray-700 mb-1">Desa Sambung <span class="text-red-500">*</span></label><input type="text" id="desa_sambung" name="Desa Sambung" class="form-input w-full" required></div>
                    </div>
                    <div class="bg-white p-5 rounded-xl border border-gray-200 shadow-sm"><label for="kelompok_sambung" class="block text-sm font-medium text-gray-700 mb-1">Kelompok Sambung <span class="text-red-500">*</span></label><input type="text" id="kelompok_sambung" name="Kelompok Sambung" class="form-input w-full" required></div>
                </fieldset>

                <fieldset class="space-y-4">
                    <legend class="flex items-center text-xl font-semibold text-gray-800 border-b-2 border-gray-100 pb-3 mb-4 w-full">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3 text-emerald-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path d="M12 14l9-5-9-5-9 5 9 5z" /><path d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-5.998 12.078 12.078 0 01.665-6.479L12 14z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-5.998 12.078 12.078 0 01.665-6.479L12 14zm-4 6v-7.5l4-2.222 4 2.222V20" /></svg>
                        Informasi Tambahan
                    </legend>
                     <div class="bg-white p-5 rounded-xl border border-gray-200 shadow-sm">
                        <label class="block text-sm font-medium text-gray-700 mb-3">Pendidikan Terakhir <span class="text-red-500">*</span></label>
                        <div class="grid grid-cols-2 md:grid-cols-3 gap-x-6 gap-y-3">
                           <label class="flex items-center"><input type="radio" name="Pendidikan Terakhir" value="SD" class="form-radio h-5 w-5 text-emerald-600 focus:ring-emerald-500" required><span class="ml-3 text-gray-700">SD</span></label>
                           <label class="flex items-center"><input type="radio" name="Pendidikan Terakhir" value="SMP" class="form-radio h-5 w-5 text-emerald-600 focus:ring-emerald-500" required><span class="ml-3 text-gray-700">SMP</span></label>
                           <label class="flex items-center"><input type="radio" name="Pendidikan Terakhir" value="SMA" class="form-radio h-5 w-5 text-emerald-600 focus:ring-emerald-500" required><span class="ml-3 text-gray-700">SMA</span></label>
                           <label class="flex items-center"><input type="radio" name="Pendidikan Terakhir" value="SMK" class="form-radio h-5 w-5 text-emerald-600 focus:ring-emerald-500" required><span class="ml-3 text-gray-700">SMK</span></label>
                           <label class="flex items-center"><input type="radio" name="Pendidikan Terakhir" value="D3" class="form-radio h-5 w-5 text-emerald-600 focus:ring-emerald-500" required><span class="ml-3 text-gray-700">D3</span></label>
                           <label class="flex items-center"><input type="radio" name="Pendidikan Terakhir" value="D4" class="form-radio h-5 w-5 text-emerald-600 focus:ring-emerald-500" required><span class="ml-3 text-gray-700">D4</span></label>
                           <label class="flex items-center"><input type="radio" name="Pendidikan Terakhir" value="S1" class="form-radio h-5 w-5 text-emerald-600 focus:ring-emerald-500" required><span class="ml-3 text-gray-700">S1</span></label>
                           <label class="flex items-center"><input type="radio" name="Pendidikan Terakhir" value="S2" class="form-radio h-5 w-5 text-emerald-600 focus:ring-emerald-500" required><span class="ml-3 text-gray-700">S2</span></label>
                           <label class="flex items-center"><input type="radio" name="Pendidikan Terakhir" value="S3" class="form-radio h-5 w-5 text-emerald-600 focus:ring-emerald-500" required><span class="ml-3 text-gray-700">S3</span></label>
                        </div>
                    </div>
                     <div class="bg-white p-5 rounded-xl border border-gray-200 shadow-sm"><label for="jurusan" class="block text-sm font-medium text-gray-700 mb-1">Jurusan <span class="text-red-500">*</span></label><input type="text" id="jurusan" name="Jurusan" class="form-input w-full" required></div>
                    <div class="bg-white p-5 rounded-xl border border-gray-200 shadow-sm">
                        <label class="block text-sm font-medium text-gray-700 mb-3">Status Mondok <span class="text-red-500">*</span></label>
                        <div class="flex items-center space-x-6"><label class="flex items-center"><input type="radio" name="Status Mondok" value="Person" class="form-radio h-5 w-5 text-emerald-600 focus:ring-emerald-500" required><span class="ml-3 text-gray-700">Person</span></label><label class="flex items-center"><input type="radio" name="Status Mondok" value="CKM" class="form-radio h-5 w-5 text-emerald-600 focus:ring-emerald-500" required><span class="ml-3 text-gray-700">CKM</span></label></div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-white p-5 rounded-xl border border-gray-200 shadow-sm">
                            <label class="block text-sm font-medium text-gray-700 mb-3">Bahasa Makna <span class="text-red-500">*</span></label>
                            <div class="flex flex-col space-y-3"><label class="flex items-center"><input type="radio" name="Bahasa Makna" value="Indonesia" class="form-radio h-5 w-5 text-emerald-600 focus:ring-emerald-500" required><span class="ml-3 text-gray-700">Indonesia</span></label><label class="flex items-center"><input type="radio" name="Bahasa Makna" value="Jawa" class="form-radio h-5 w-5 text-emerald-600 focus:ring-emerald-500" required><span class="ml-3 text-gray-700">Jawa</span></label><label class="flex items-center"><input type="radio" name="Bahasa Makna" value="Indonesia Jawa" class="form-radio h-5 w-5 text-emerald-600 focus:ring-emerald-500" required><span class="ml-3 text-gray-700">Indonesia Jawa</span></label></div>
                        </div>
                        <div class="bg-white p-5 rounded-xl border border-gray-200 shadow-sm"><label for="bahasa_harian" class="block text-sm font-medium text-gray-700 mb-1">Bahasa Harian <span class="text-red-500">*</span></label><input type="text" id="bahasa_harian" name="Bahasa Harian" class="form-input w-full" required></div>
                    </div>
                    <div class="bg-white p-5 rounded-xl border border-gray-200 shadow-sm">
                        <label class="block text-sm font-medium text-gray-700 mb-3">Khatam Hadist Besar</label>
                        <div class="grid grid-cols-2 md:grid-cols-3 gap-x-6 gap-y-3">
                            <label class="flex items-center"><input type="checkbox" name="Khatam Hadist Besar" value="Bukhori" class="form-checkbox h-5 w-5 text-emerald-600 rounded focus:ring-emerald-500"><span class="ml-3 text-gray-700">Bukhori</span></label>
                            <label class="flex items-center"><input type="checkbox" name="Khatam Hadist Besar" value="Muslim" class="form-checkbox h-5 w-5 text-emerald-600 rounded focus:ring-emerald-500"><span class="ml-3 text-gray-700">Muslim</span></label>
                            <label class="flex items-center"><input type="checkbox" name="Khatam Hadist Besar" value="Abu Daud" class="form-checkbox h-5 w-5 text-emerald-600 rounded focus:ring-emerald-500"><span class="ml-3 text-gray-700">Abu Daud</span></label>
                            <label class="flex items-center"><input type="checkbox" name="Khatam Hadist Besar" value="Nasai" class="form-checkbox h-5 w-5 text-emerald-600 rounded focus:ring-emerald-500"><span class="ml-3 text-gray-700">Nasai</span></label>
                            <label class="flex items-center"><input type="checkbox" name="Khatam Hadist Besar" value="Tirmidzi" class="form-checkbox h-5 w-5 text-emerald-600 rounded focus:ring-emerald-500"><span class="ml-3 text-gray-700">Tirmidzi</span></label>
                            <label class="flex items-center"><input type="checkbox" name="Khatam Hadist Besar" value="Ibnu Majah" class="form-checkbox h-5 w-5 text-emerald-600 rounded focus:ring-emerald-500"><span class="ml-3 text-gray-700">Ibnu Majah</span></label>
                        </div>
                    </div>
                    <div class="bg-white p-5 rounded-xl border border-gray-200 shadow-sm">
                        <label class="block text-sm font-medium text-gray-700 mb-3">SIM Yang di Miliki <span class="text-red-500">*</span></label>
                        <div class="grid grid-cols-2 md:grid-cols-3 gap-x-6 gap-y-3">
                            <label class="flex items-center"><input type="checkbox" name="SIM Yang di Miliki" value="A" class="form-checkbox h-5 w-5 text-emerald-600 rounded focus:ring-emerald-500"><span class="ml-3 text-gray-700">A</span></label>
                            <label class="flex items-center"><input type="checkbox" name="SIM Yang di Miliki" value="B1" class="form-checkbox h-5 w-5 text-emerald-600 rounded focus:ring-emerald-500"><span class="ml-3 text-gray-700">B1</span></label>
                            <label class="flex items-center"><input type="checkbox" name="SIM Yang di Miliki" value="B2" class="form-checkbox h-5 w-5 text-emerald-600 rounded focus:ring-emerald-500"><span class="ml-3 text-gray-700">B2</span></label>
                            <label class="flex items-center"><input type="checkbox" name="SIM Yang di Miliki" value="C" class="form-checkbox h-5 w-5 text-emerald-600 rounded focus:ring-emerald-500"><span class="ml-3 text-gray-700">C</span></label>
                            <label class="flex items-center"><input type="checkbox" name="SIM Yang di Miliki" value="Belum Punya" class="form-checkbox h-5 w-5 text-emerald-600 rounded focus:ring-emerald-500"><span class="ml-3 text-gray-700">Belum Punya</span></label>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-white p-5 rounded-xl border border-gray-200 shadow-sm"><label for="keahlian" class="block text-sm font-medium text-gray-700 mb-1">Keahlian <span class="text-red-500">*</span></label><input type="text" id="keahlian" name="Keahlian" class="form-input w-full" required></div>
                        <div class="bg-white p-5 rounded-xl border border-gray-200 shadow-sm"><label for="hobi" class="block text-sm font-medium text-gray-700 mb-1">Hobi <span class="text-red-500">*</span></label><input type="text" id="hobi" name="Hobi" class="form-input w-full" required></div>
                    </div>
                </fieldset>

                <!-- Submit Button -->
                <div class="pt-6">
                    <button type="submit" id="submitButton" class="w-full group bg-emerald-600 text-white font-bold text-lg py-4 px-6 rounded-lg shadow-lg shadow-emerald-200/80 hover:bg-emerald-700 focus:outline-none focus:ring-4 focus:ring-emerald-300 transition-all duration-300 ease-in-out flex items-center justify-center hover:-translate-y-1">
                        <span class="btn-text">Daftar Sekarang</span>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 ml-3 transform transition-transform duration-300 group-hover:translate-x-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" /></svg>
                        <span class="spinner w-6 h-6 ml-3 rounded-full border-2 border-white hidden"></span>
                    </button>
                </div>

            </form>
        </div>
        
        <!-- Footer -->
        <footer class="text-center mt-12">
            <p class="text-gray-500">&copy; <span id="year"></span> PPHB Burhan Al-Bana Metro. All Rights Reserved.</p>
        </footer>
    </div>
    
    <!-- Success Modal -->
    <div id="successModal" class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center p-4 modal-backdrop opacity-0 pointer-events-none">
        <div class="bg-white rounded-lg shadow-xl p-8 max-w-sm w-full text-center transform scale-95 transition-transform duration-300">
            <div class="mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 mb-4">
                <svg class="h-10 w-10 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" /></svg>
            </div>
            <h3 class="text-2xl font-semibold text-gray-900">Alhamdulillah, Pendaftaran Terkirim!</h3>
            <p class="text-gray-600 mt-2 leading-relaxed">Alhamdulillah Jaza Kumullohu Khoiro sudah mendaftar, kami akan segera memproses formulir anda. Semoga Allah paring Aman, Selamat, Lancar, dan Barokah.</p>
            <button id="closeModal" class="mt-6 w-full bg-emerald-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-emerald-700 transition duration-300">Tutup</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Add common classes to form elements
            document.querySelectorAll('input[type="text"], input[type="email"], input[type="tel"], input[type="number"], input[type="date"], textarea').forEach(el => {
                el.classList.add('form-input', 'w-full', 'px-4', 'py-2.5', 'border', 'rounded-lg', 'focus:outline-none');
            });

            // Set current year in footer
            document.getElementById('year').textContent = new Date().getFullYear();

            const form = document.getElementById('registrationForm');
            const submitButton = document.getElementById('submitButton');
            const btnText = submitButton.querySelector('.btn-text');
            const spinner = submitButton.querySelector('.spinner');
            const btnIcon = submitButton.querySelector('svg');
            const modal = document.getElementById('successModal');
            const closeModalBtn = document.getElementById('closeModal');
            
            // URL DIPERBARUI DENGAN LINK BARU
            const scriptURL = 'https://script.google.com/macros/s/AKfycbwP9ttpSrU3H3Wtxi0foPTEOyoWG4EuJ6VkqaO7hqiuIyDoH9hul77Nsa6VwUg_olUsdQ/exec';

            // --- KODE AUTO-FILL ---
            const nikInput = document.getElementById('no_nik');
            const lookupStatus = document.getElementById('lookupStatus');

            async function fetchSantriData() {
                const nik = nikInput.value.trim();
                if (nik.length !== 16) {
                    lookupStatus.textContent = '';
                    return;
                }
                lookupStatus.textContent = 'Mencari data...';
                const lookupURL = `${scriptURL}?nik=${encodeURIComponent(nik)}`;
                try {
                    const response = await fetch(lookupURL);
                    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                    const result = await response.json();
                    if (result.status === 'success') {
                        lookupStatus.textContent = 'Data ditemukan! Mengisi formulir...';
                        populateForm(result.data);
                    } else if (result.status === 'not_found') {
                        lookupStatus.textContent = 'Data baru, silakan lanjutkan mengisi.';
                        const nikValue = nikInput.value;
                        form.reset();
                        nikInput.value = nikValue;
                    } else {
                        throw new Error(result.message || 'Gagal mengambil data.');
                    }
                } catch (error) {
                    console.error('Error saat mencari data:', error);
                    lookupStatus.textContent = 'Gagal memeriksa data. Coba lagi.';
                } finally {
                     setTimeout(() => { lookupStatus.textContent = ''; }, 3000);
                }
            }
            function populateForm(data) {
                for (const key in data) {
                    const value = data[key];
                    if (value === null || value === undefined) continue;
                    const elements = form.querySelectorAll(`[name="${key}"]`);
                    if (elements.length > 0) {
                        const elType = elements[0].type;
                        if (elType === 'radio') {
                            elements.forEach(radio => radio.checked = (radio.value == value));
                        } else if (elType === 'checkbox') {
                            const values = String(value).split(',').map(v => v.trim());
                            elements.forEach(checkbox => checkbox.checked = values.includes(checkbox.value));
                        } else {
                            elements[0].value = value;
                        }
                    }
                }
            }
            nikInput.addEventListener('blur', fetchSantriData);
            // --- AKHIR KODE AUTO-FILL ---

            // Event listener untuk submit form
            form.addEventListener('submit', function(e) {
                e.preventDefault(); 
                if (!form.checkValidity()) {
                    const tmpSubmit = document.createElement('button');
                    form.appendChild(tmpSubmit);
                    tmpSubmit.click();
                    form.removeChild(tmpSubmit);
                    return;
                }
                
                btnText.classList.add('hidden');
                btnIcon.classList.add('hidden');
                spinner.classList.remove('hidden');
                submitButton.disabled = true;

                const formData = new FormData(form);

                fetch(scriptURL, { method: 'POST', body: formData})
                    .then(response => {
                        if (response.ok) return response.json();
                        return response.text().then(text => { throw new Error('Network response was not ok. ' + text) });
                    })
                    .then(data => {
                        console.log('Success!', data);
                        modal.classList.remove('opacity-0', 'pointer-events-none');
                        modal.querySelector('.transform').classList.remove('scale-95');
                    })
                    .catch(error => {
                        console.error('Error!', error.message);
                        alert('Terjadi kesalahan saat mengirim formulir. Silakan coba lagi.');
                    })
                    .finally(() => {
                        btnText.classList.remove('hidden');
                        btnIcon.classList.remove('hidden');
                        spinner.classList.add('hidden');
                        submitButton.disabled = false;
                    });
            });

            const closeModal = () => {
                modal.classList.add('opacity-0', 'pointer-events-none');
                modal.querySelector('.transform').classList.add('scale-95');
                form.reset();
            };
            closeModalBtn.addEventListener('click', closeModal);
        });
    </script>

</body>
</html>

